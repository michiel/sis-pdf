# ObjStm + decode handling uplift

## Goals

1. Surface embedded object metadata and direct guidance when ObjStm findings appear without `--deep`.
2. Improve analyst workflows by linking findings to documentation from CLI output (readable/REPL/explain).
3. Trace decoded artifacts to help judge whether a previously skipped `declared_filter_invalid` should still be investigated.
4. Add regression coverage for ObjStm findings across deep/non-deep scans.

## Implement plan

### 1. ObjStm payload teaser
- Step 1.1: Extend `objstm_summary.rs` to capture the first few object numbers and types parsed from the ObjStm header.
- Step 1.2: Store teasers (e.g., `objstm.preview_ids`, `objstm.preview_types`) in finding metadata and evaluate formatting for readable output.
- Step 1.3: Update documentation to describe the teaser fields.
- Step 1.4: Verify `sis explain` shows teaser metadata and plan to surface in REPL tables.

### 2. Interactive doc link
- Step 2.1: Identify target documentation (`docs/filter-flatedecode.md` and `docs/findings.md` for ObjStm).
- Step 2.2: Update `report.rs` readable formatter and `print_repl_help` to mention `:doc filter-flatedecode` or similar.
- Step 2.3: Add helper command if necessary.
- Step 2.4: Ensure `sis explain` output notes the doc link when `decode.mismatch` references `/FlateDecode`.

### 3. Decode artifact tracing
- Step 3.1: Record decoded stream context (object count/type info) inside `declared_filter_invalid` metadata when mismatch occurs despite successful decode.
- Step 3.2: Use this metadata in readable output to clarify which objects were decoded.
- Step 3.3: Update tests for this metadata (targeting `content_first` tests).

### 4. ObjStm deep scan tests
- Step 4.1: Add fixtures (if needed) or reuse existing to show ObjStm entries with/without deep decoding.
- Step 4.2: Write integration/regression tests ensuring the `objstm_embedded_summary` note toggles properly when `ctx.options.deep` changes.
- Step 4.3: Automate `declared_filter_invalid` silence with structural streams when deep toggled.

## Progress tracking

1. ObjStm payload teaser updated (`status: complete`).
2. Interactive doc links added (`status: complete`).
3. Decode metadata traces recorded (`status: complete`).
4. ObjStm deep tests in place (`status: complete`).
